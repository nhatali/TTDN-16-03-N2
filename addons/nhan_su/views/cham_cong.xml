<?xml version="1.0" encoding="utf-8"?>
<odoo>
  <data>

    <record id="view_cham_cong_form" model="ir.ui.view">
      <field name="name">cham_cong.form</field>
      <field name="model">cham_cong</field>
      <field name="arch" type="xml">
        <form string="Chấm công">
          <sheet>
            <group col="4">
              <field name="nhan_vien_id"/>
              <field name="ngay"/>
              <field name="gio_vao"/>
              <field name="gio_ra"/>
              <field name="trang_thai"/>
              <field name="ghi_chu" colspan="4"/>
            </group>
          </sheet>
        </form>
      </field>
    </record>

    <record id="view_cham_cong_tree" model="ir.ui.view">
      <field name="name">cham_cong.tree</field>
      <field name="model">cham_cong</field>
      <field name="arch" type="xml">
        <tree string="Chấm công">
          <field name="ngay"/>
          <field name="nhan_vien_id"/>
          <field name="gio_vao"/>
          <field name="gio_ra"/>
          <field name="trang_thai"/>
        </tree>
      </field>
    </record>

    <record id="view_cham_cong_search" model="ir.ui.view">
      <field name="name">cham_cong.search</field>
      <field name="model">cham_cong</field>
      <field name="arch" type="xml">
        <search string="Tìm chấm công">
          <field name="nhan_vien_id"/>
          <field name="ngay"/>
          <field name="trang_thai"/>
          <filter string="Có mặt" name="filter_present" domain="[('trang_thai','=','present')]"/>
          <filter string="Đi muộn" name="filter_late" domain="[('trang_thai','=','late')]"/>
          <filter string="Nghỉ phép" name="filter_leave" domain="[('trang_thai','=','leave')]"/>
          <filter string="Vắng" name="filter_absent" domain="[('trang_thai','=','absent')]"/>
          <separator/>
          <filter string="Tháng này" name="filter_this_month" 
                  domain="[('ngay','&gt;=', (context_today() - relativedelta(day=1)).strftime('%Y-%m-%d')),
                           ('ngay','&lt;=', (context_today() + relativedelta(day=31)).strftime('%Y-%m-%d'))]"/>
          <group expand="0" string="Nhóm theo">
            <filter string="Nhân viên" name="group_by_nhan_vien" domain="[]" context="{'group_by': 'nhan_vien_id'}"/>
            <filter string="Trạng thái" name="group_by_trang_thai" domain="[]" context="{'group_by': 'trang_thai'}"/>
            <filter string="Ngày" name="group_by_ngay" domain="[]" context="{'group_by': 'ngay'}"/>
          </group>
        </search>
      </field>
    </record>

    <record id="action_cham_cong" model="ir.actions.act_window">
      <field name="name">Chấm công</field>
      <field name="res_model">cham_cong</field>
      <field name="view_mode">tree,form</field>
      <field name="search_view_id" ref="view_cham_cong_search"/>
    </record>

  </data>
</odoo>
